"use strict";var _createClass=function(){function t(t,e){for(var i in e){var n=e[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},PerspectiveSquare=function(){function t(e,i,n){_classCallCheck(this,t),this._canvas=e,this._context=this._canvas.getContext("2d"),this._originalSquare=[i,[i[0]+n,i[1]],[i[0]+n,i[1]+n],[i[0],i[1]+n]],this._squareCenter=[i[0]+n/2,i[1]+n/2],this._square=this._originalSquare.map(function(t){return t.slice()}),this._boxWidth=n,this._leftTopCorner=i,this.depth=100,this.lineColor="black",this.background="white",this.lineWeight=3,this.maxSquareDisplacement=60}return _createClass(t,{boxWidth:{get:function(){return this._boxWidth}},leftTopCorner:{get:function(){return this._leftTopCorner}},drawSquare:{value:function(t){var e=this,i=this._canvas.width,n=this._canvas.height;this._context.clearRect(0,0,i,n,this.background),this._context.fillStyle=this.background,this._context.fillRect(0,0,i,n),this._context.lineWidth=this.lineWeight,this._context.strokeStyle=this.lineColor;var a=[0,0],r=Math.min(this._euclideanDistance(this._squareCenter,t),this.maxSquareDisplacement);(a=this._distanceDownLine(this._squareCenter,t,r))[0]-=this._squareCenter[0],a[1]-=this._squareCenter[1];for(var s=0;s<4;s++)this._square[s][0]=this._originalSquare[s][0]-a[0],this._square[s][1]=this._originalSquare[s][1]-a[1];var h=[];if(this._euclideanDistance(t,this._square[0])<this.depth)for(s=0;s<4;s++)h.push(t);else h.push(this._distanceDownLine(this._square[0],t,this.depth)),h.push([this._calculateIntersection(this._square[1],t,!0,h[0][1]),h[0][1]]),h.push([h[1][0],this._calculateIntersection(this._square[2],t,!1,h[1][0])]),h.push([this._calculateIntersection(this._square[3],t,!0,h[2][1]),h[2][1]]),this._context.beginPath(),this._context.moveTo(h[h.length-1][0],h[h.length-1][1]),h.forEach(function(t){return e._context.lineTo(t[0],t[1])}),this._context.stroke(),this._context.closePath();this._square.forEach(function(i,n){e._context.beginPath(),e._context.moveTo(i[0],i[1]),e._context.lineTo(h[n][0],h[n][1]),e._context.stroke(),e._context.closePath(),e._context.beginPath(),e._context.moveTo(h[n][0],h[n][1]),e._context.setLineDash([0,4,e.lineWeight,4]),e._context.lineTo(t[0],t[1]),e._context.stroke(),e._context.closePath(),e._context.setLineDash([])}),this._drawSquareOnContext()}},resize:{value:function(t,e){this._originalSquare=[t,[t[0]+e,t[1]],[t[0]+e,t[1]+e],[t[0],t[1]+e]],this._squareCenter=[t[0]+e/2,t[1]+e/2],this._square=this._originalSquare.map(function(t){return t.slice()}),this._boxWidth=e,this._leftTopCorner=t}},_drawSquareOnContext:{value:function(){var t=this;this._context.beginPath(),this._context.moveTo(this._square[this._square.length-1][0],this._square[this._square.length-1][1]),this._square.forEach(function(e){return t._context.lineTo(e[0],e[1])}),this._context.stroke(),this._context.closePath}},_calculateIntersection:{value:function(t,e,i,n){return i?(e[0]-t[0])*(n-t[1])/(e[1]-t[1])+t[0]:(e[1]-t[1])*(n-t[0])/(e[0]-t[0])+t[1]}},_distanceDownLine:{value:function(t,e,i){var n=e[1]-t[1],a=e[0]-t[0],r=this._euclideanDistance(t,e),s=a-a*(r-i)/r,h=n-n*(r-i)/r;return[t[0]+s,t[1]+h]}},_euclideanDistance:{value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}}),t}(),Typewriter=(_createClass=function(){function t(t,e){for(var i in e){var n=e[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},function(){function t(e,i){var n=void 0===arguments[2]?.03:arguments[2];_classCallCheck(this,t),this._texts=e,this._el=i,this.errorProbability=n,this._currentText=i.innerHTML,this._delaySequence=[],this._delaySequenceRunning=!1,this._lengthAfterDelay=0,this._play=!1,this._stopImmediately=!1,this._textIndex=0,this._textToType=this._texts[0].split(""),this._DEFAULT_TYPE_DELAY_BASE=150,this._DEFAULT_TYPE_DELAY_VARIANCE=50,this._DEFAULT_DELETE_DELAY_BASE=80,this._DEFAULT_DELETE_DELAY_VARIANCE=10,this._DEFAULT_PAUSE_AMOUNT=2e3,this._playParamaters}return _createClass(t,{isTyping:{get:function(){return this._delaySequenceRunning}},delaySequence:{get:function(){var t=[];return this._delaySequence.forEach(function(e){return t.push(Object.assign({},e))}),t}},pause:{value:function(){var t=void 0===arguments[0]?this._DEFAULT_PAUSE_AMOUNT:arguments[0],e=void 0===arguments[1]?0:arguments[1];return this._delay(function(){},t,e),this}},deleteAllCharacters:{value:function(){for(var t=void 0===arguments[0]?this._DEFAULT_DELETE_DELAY_BASE:arguments[0],e=void 0===arguments[1]?this._DEFAULT_DELETE_DELAY_VARIANCE:arguments[1],i=this._lengthAfterDelay,n=0;n<i;n++)this.deleteCharacter(t,e);return this}},deleteCharacter:{value:function(){var t=this,e=void 0===arguments[0]?this._DEFAULT_DELETE_DELAY_BASE:arguments[0],i=void 0===arguments[1]?this._DEFAULT_DELETE_DELAY_VARIANCE:arguments[1];return this._lengthAfterDelay=Math.max(this._lengthAfterDelay-1,0),this._delay(function(){if(0==t._currentText.length)return!1;t._currentText=t._currentText.substr(0,t._currentText.length-1),t._displayCurrentText()},e,i),this}},deleteCharacters:{value:function(t){for(var e=void 0===arguments[1]?this._DEFAULT_DELETE_DELAY_BASE:arguments[1],i=void 0===arguments[2]?this._DEFAULT_DELETE_DELAY_VARIANCE:arguments[2],n=0;n<t;n++)this.deleteCharacter(e,i);return this}},play:{value:function(){var t=void 0===arguments[0]?this._DEFAULT_PAUSE_AMOUNT:arguments[0],e=void 0===arguments[1]?0:arguments[1],i=void 0===arguments[2]?this._DEFAULT_TYPE_DELAY_BASE:arguments[2],n=void 0===arguments[3]?this._DEFAULT_TYPE_DELAY_VARIANCE:arguments[3],a=void 0===arguments[4]?this._DEFAULT_DELETE_DELAY_BASE:arguments[4],r=void 0===arguments[5]?this._DEFAULT_DELETE_DELAY_VARIANCE:arguments[5];return this._playParams={pause:t,pauseVariance:e,typeDelayBase:i,typeDelayVariance:n,deleteDelayBase:a,deleteDelayVariance:r},this._play=!0,this._delaySequenceRunning||this._executeNextDelay(),this}},stop:{value:function(){var t=void 0!==arguments[0]&&arguments[0];return this._play=!1,t&&(this._stopImmediately=!0,this._delaySequenceRunning=!1),this}},typeCharacter:{value:function(){var t,e=this,i=void 0===arguments[0]?null:arguments[0],n=void 0===arguments[1]?this._DEFAULT_TYPE_DELAY_BASE:arguments[1],a=void 0===arguments[2]?this._DEFAULT_TYPE_DELAY_VARIANCE:arguments[2];if(null==i){if(!(this._textToType.length>0))return!1;i=this._textToType.unshift()}return this._lengthAfterDelay++,Math.random()<=this.errorProbability&&(t=e._getMistakeCharacter(i),e._lengthAfterDelay++,e._delay(function(){t&&(e._currentText=e._currentText.concat(t)),e._displayCurrentText()}),e.pause(200,100),e.deleteCharacters(1)),this._delay(function(){e._currentText=e._currentText.concat(i),e._displayCurrentText()},n,a),this}},typeNextText:{value:function(){var t=this,e=void 0===arguments[0]?this._DEFAULT_TYPE_DELAY_BASE:arguments[0],i=void 0===arguments[1]?this._DEFAULT_TYPE_DELAY_VARIANCE:arguments[1];return this._textToType=this._texts[this._textIndex].split(""),this._textIndex=(this._textIndex+1)%this._texts.length,this._textToType.forEach(function(n){t.typeCharacter(n,e,i)}),this}},_delay:{value:function(t,e){var i=void 0===arguments[2]?0:arguments[2];this._delaySequence.push({function:t,delay:e+Math.random()*i-i/2}),this._delaySequenceRunning||this._executeNextDelay()}},_displayCurrentText:{value:function(){this._el.innerHTML=this._currentText}},_executeNextDelay:{value:function(){var t,e=this;this._stopImmediately?this._stopImmediately=!1:(this._delaySequenceRunning=!0,this._delaySequence.length>0?(t=e._delaySequence.shift(),setTimeout(function(){t.function(),e._executeNextDelay()},t.delay)):this._play?(this.typeNextText(this._playParams.typeDelayBase,this._playParams.typeDelayVariance),this.pause(this._playParams.pause,this._playParams.pauseVariance),this.deleteAllCharacters(this._playParams.deleteDelayBase,this._playParams.deleteDelayVariance),this.pause(this._playParams.pause,this._playParams.pauseVariance),this._executeNextDelay()):this._delaySequenceRunning=!1)}},_getMistakeCharacter:{value:function(t){var e=["qwertyuiop[","asdfghjkl;","zxcvbnm,"],i=t.toUpperCase()==t;if(-1!="abcdefghijklmnopqrstuvwxyz".indexOf(t.toLowerCase())){var n=i?.9:.1;if(Math.random()<=n)return i?t.toLowerCase():t.toUpperCase();for(var a=0;a<e.length;a++){if(-1!=(o=e[a].indexOf(t.toLowerCase())))switch(o){case 0:return e[a][1];case e[a].length-1:return e[a].length-2;default:return Math.random()<=.5?e[a][o-1]:e[a][o+1]}}}var r=["1234567890-=","p[]\\","l;'","m,./"],s=["!@#$%^&*()_+","P{}|",'L:"',"M<>?"];for(a=0;a<s.length;a++){var h=s[a].indexOf(t);if(h-=-1){if(Math.random()<=.9)return r[a][h];switch(h){case 0:return s[a][1];case s[a].length-1:return s[a][s[a].length-2];default:return Math.random()<=.5?s[a][h-1]:s[a][h+1]}}}for(a=0;a<r.length;a++){var o=s[a].indexOf(t);if(o-=-1){if(Math.random()<=.1)return s[a][o];switch(o){case 0:return s[a][1];case s[a].length-1:return s[a][s[a].length-2];default:return Math.random()<=.5?s[a][o-1]:s[a][o+1]}}}return t||" "}}}),t}()),Wanderer=(_createClass=function(){function t(t,e){for(var i in e){var n=e[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},function(){function t(e,i){var n=void 0===arguments[2]?[0,0]:arguments[2];_classCallCheck(this,t),this.width=e,this.height=i,this.leftCorner=n,this._wanderToFromStart=null,this._animationFrame,this._wandering=!1,this._alpha=3,this._distanceFromToToFrom,this._delay}return _createClass(t,{startWandering:{value:function(t,e){var i=void 0===arguments[2]?0:arguments[2],n=void 0===arguments[3]?this._getNewPoint():arguments[3];this._wandering=!0,this._delay=i,this.wanderToFrom(this._getNewPoint(),n,e,t)}},stopWandering:{value:function(){var t=void 0!==arguments[0]&&arguments[0];this._wandering=!1,t&&(window.cancelAnimationFrame(this._animationFrame),this._wanderToFromStart=null)}},wanderToFrom:{value:function(t,e,i,n){var a=this;this._alpha=3*Math.random()+2|0,this._distanceFromToToFrom=this._euclideanDistance(t,e),this._animationFrame=window.requestAnimationFrame(function(r){return a._step(t,e,i,n,r)})}},_step:{value:function(t,e,i,n,a){var r=this;this._wanderToFromStart||(this._wanderToFromStart=a);var s=a-this._wanderToFromStart;n(this._interpolate(t,e,Math.min(1,s/i))),s<i?this._animationFrame=window.requestAnimationFrame(function(a){return r._step(t,e,i,n,a)}):(this._wanderToFromStart=null,this._wandering&&(this._delay>0?setTimeout(function(){return r.wanderToFrom(r._getNewPoint(),t,i,n)},this._delay):this.wanderToFrom(this._getNewPoint(),t,i,n)))}},_interpolate:{value:function(t,e,i){return this._distanceDownLine(e,t,this._distanceFromToToFrom*this._easeInOut(i))}},_easeInOut:{value:function(t){return Math.pow(t,this._alpha)/(Math.pow(t,this._alpha)+Math.pow(1-t,this._alpha))}},_distanceDownLine:{value:function(t,e,i){var n=e[1]-t[1],a=e[0]-t[0];if(0==n&&0==a)return t;var r=this._euclideanDistance(t,e),s=a-a*(r-i)/r,h=n-n*(r-i)/r;return[t[0]+s,t[1]+h]}},_getNewPoint:{value:function(){return[this.leftCorner[0]+Math.random()*this.width,this.leftCorner[1]+Math.random()*this.height]}},_euclideanDistance:{value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}}),t}());